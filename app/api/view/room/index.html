<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<!--    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script src="__API__/lib/jquery.min.js"></script>
</head>
<body>
<div id="welcome"></div>
<div>
    <input type="text" id="input"/>
    <input type="button" onclick="send()" value="发送"/>
</div>
<div id="message"></div>
<script>
    eruda.init();
    console.log('控制台打印信息');
    var wsServer = 'wss://apptest.huihuagongxue.top:9502?token=test-token';
    var websocket = new WebSocket(wsServer);
    websocket.onopen = function (res) {
        console.log("<h1>连接成功！欢迎</h1>");
        $("#welcome").append(
            "<h1>连接成功！欢迎</h1>"
        );
    };

    websocket.onclose = function (res) {
        $("#message").append(
            "<h3>连接关闭</h3>"
        );
    };

    websocket.onmessage = function (res) {
        console.log(res.data);
        $("#message").append(
            "<h3>" + res.data + "</h3>"
        );
    };

    websocket.onerror = function (res, e) {
        $("#message").append(
            "<h3>" + res + "</h3>"
        );
    };

    function send() {
        websocket.send(JSON.stringify($("#input").val()));
    }
</script>
</body>
</html>